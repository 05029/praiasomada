<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarrafal Transportes | Marca√ß√£o de Transporte</title>
    <style>
        :root {
            --primary-blue: #2563eb;     /* Azul mais vibrante e profissional */
            --primary-dark: #1e40af;
            --light-bg: #f8fafc;         /* Fundo muito claro e limpo */
            --card-bg: #ffffff;
            --text-primary: #1e293b;     /* Cinza escuro para texto */
            --text-secondary: #64748b;   /* Cinza m√©dio */
            --border-color: #e2e8f0;     /* Borda sutil */
            --success: #10b981;          /* Verde para confirma√ß√µes */
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            --shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
            background-color: var(--light-bg);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Container principal com anima√ß√£o de entrada */
        .main-container {
            background-color: var(--card-bg);
            border-radius: 16px;
            box-shadow: var(--shadow);
            padding: 40px;
            max-width: 700px;
            width: 100%;
            border: 1px solid var(--border-color);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
            animation: containerFadeIn 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .main-container:hover {
            box-shadow: var(--shadow-hover);
            transform: translateY(-5px);
        }

        @keyframes containerFadeIn {
            from { 
                opacity: 0; 
                transform: translateY(20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        /* Elemento decorativo azul no topo */
        .main-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-blue), var(--primary-dark));
            border-radius: 16px 16px 0 0;
        }

        /* Cabe√ßalho */
        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 8px;
            letter-spacing: -0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .logo-icon {
            font-size: 36px;
        }

        .tagline {
            color: var(--text-secondary);
            font-size: 16px;
            font-weight: 400;
            max-width: 500px;
            margin: 0 auto;
        }

        /* Se√ß√µes do formul√°rio com cart√µes */
        .form-section {
            background-color: var(--light-bg);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .form-section:hover {
            border-color: var(--primary-blue);
            background-color: rgba(37, 99, 235, 0.01);
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .section-icon {
            font-size: 20px;
        }

        /* Layout do formul√°rio */
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 640px) {
            .form-row {
                flex-direction: column;
                gap: 15px;
            }
        }

        .form-group {
            flex: 1;
        }

        /* Labels e inputs com transi√ß√µes */
        label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 8px;
            transition: color 0.2s;
        }

        .required::after {
            content: '*';
            color: #ef4444;
            margin-left: 4px;
        }

        select, input, textarea {
            width: 100%;
            padding: 14px 16px;
            border: 1.5px solid var(--border-color);
            border-radius: 10px;
            font-size: 16px;
            font-family: inherit;
            background-color: white;
            color: var(--text-primary);
            transition: all 0.3s;
            appearance: none;
        }

        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
            transform: translateY(-2px);
        }

        /* Container de pre√ßo com anima√ß√£o */
        .price-container {
            text-align: center;
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 12px;
            padding: 24px;
            margin: 30px 0;
            border: 1px solid #bae6fd;
            transition: all 0.5s ease;
            opacity: 0;
            transform: scale(0.95);
        }

        .price-container.visible {
            opacity: 1;
            transform: scale(1);
        }

        .price-label {
            font-size: 15px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .price-value {
            font-size: 42px;
            font-weight: 700;
            color: var(--primary-blue);
            line-height: 1;
            margin-bottom: 5px;
        }

        .price-detail {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Bot√£o principal com efeito */
        .submit-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 12px;
            padding: 18px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            letter-spacing: 0.5px;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(37, 99, 235, 0.2);
        }

        .submit-btn:active {
            transform: translateY(-1px);
        }

        .submit-btn::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -60%;
            width: 40px;
            height: 200%;
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(30deg);
            transition: left 0.5s;
        }

        .submit-btn:hover::after {
            left: 120%;
        }

        /* Confirma√ß√£o com anima√ß√£o de entrada */
        .confirmation {
            background-color: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 12px;
            padding: 30px;
            margin-top: 30px;
            display: none;
            animation: slideInUp 0.6s ease-out;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .confirmation-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            color: var(--success);
        }

        .confirmation-icon {
            font-size: 28px;
        }

        /* WhatsApp info */
        .whatsapp-info {
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin-top: 25px;
            text-align: center;
            display: none;
            animation: fadeIn 0.5s ease-out;
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.2);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Rodap√© */
        footer {
            margin-top: 40px;
            text-align: center;
            color: var(--text-secondary);
            font-size: 14px;
            padding: 20px;
            border-top: 1px solid var(--border-color);
            width: 100%;
            max-width: 700px;
        }

        .developer-credit a {
            color: var(--primary-blue);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s;
        }

        .developer-credit a:hover {
            color: var(--primary-dark);
            text-decoration: underline;
        }

        /* Estados de loading e desabilitado */
        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .form-group.error input,
        .form-group.error select,
        .form-group.error textarea {
            border-color: #ef4444;
            background-color: #fef2f2;
        }

        .error-message {
            color: #ef4444;
            font-size: 13px;
            margin-top: 6px;
            display: none;
        }

        .form-group.error .error-message {
            display: block;
        }
    </style>
    <!-- Fonte Inter do Google Fonts para tipografia moderna -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- √çcones do Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="main-container">
        <!-- Cabe√ßalho com Logo -->
        <header class="header">
            <div class="logo">
                <span class="logo-icon">üöö</span>
                Tarrafal Transportes
            </div>
            <p class="tagline">Marca√ß√£o de transporte seguro e eficiente entre cidades em Cabo Verde</p>
        </header>

        <form id="formMarcacao">
            <!-- Se√ß√£o 1: Dados Pessoais -->
            <section class="form-section">
                <h2 class="section-title">
                    <i class="fas fa-user section-icon"></i>
                    Dados Pessoais
                </h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="nome" class="required">Nome Completo</label>
                        <input type="text" id="nome" placeholder="Ex: Jo√£o da Silva" required>
                        <div class="error-message">Por favor, digite seu nome completo</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="telefone" class="required">Telefone</label>
                        <input type="tel" id="telefone" placeholder="Ex: 999 99 99" required>
                        <div class="error-message">Digite um telefone v√°lido (ex: 999 99 99)</div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="localizacao" class="required">Localiza√ß√£o para Recolha</label>
                    <input type="text" id="localizacao" placeholder="Ex: Rua Principal, N√∫mero, Bairro" required>
                    <div class="error-message">Por favor, indique a localiza√ß√£o para recolha</div>
                </div>
            </section>

            <!-- Se√ß√£o 2: Detalhes da Viagem -->
            <section class="form-section">
                <h2 class="section-title">
                    <i class="fas fa-route section-icon"></i>
                    Detalhes da Viagem
                </h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="origem" class="required">Origem</label>
                        <select id="origem" required>
                            <option value="">Selecione a origem</option>
                            <option value="Tarrafal">Tarrafal</option>
                            <option value="Assomada">Assomada</option>
                            <option value="Praia">Praia</option>
                        </select>
                        <div class="error-message">Por favor, selecione a origem</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="destino" class="required">Destino</label>
                        <select id="destino" required>
                            <option value="">Selecione o destino</option>
                            <!-- As op√ß√µes ser√£o preenchidas por JavaScript -->
                        </select>
                        <div class="error-message">Por favor, selecione o destino</div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="data" class="required">Data da Viagem</label>
                        <input type="date" id="data" required>
                        <div class="error-message">Selecione uma data v√°lida</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="hora" class="required">Hora da Viagem</label>
                        <input type="time" id="hora" required min="05:00" max="22:00">
                        <div class="error-message">Selecione um hor√°rio entre 05:00 e 22:00</div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="passageiros">N√∫mero de Passageiros</label>
                    <select id="passageiros">
                        <option value="1">1 passageiro</option>
                        <option value="2">2 passageiros</option>
                        <option value="3">3 passageiros</option>
                        <option value="4">4 passageiros</option>
                        <option value="5">5 ou mais passageiros</option>
                    </select>
                </div>
            </section>

            <!-- Se√ß√£o 3: Observa√ß√µes -->
            <section class="form-section">
                <h2 class="section-title">
                    <i class="fas fa-comment-dots section-icon"></i>
                    Observa√ß√µes (Opcional)
                </h2>
                <div class="form-group">
                    <label for="observacoes">Observa√ß√µes Especiais</label>
                    <textarea id="observacoes" rows="3" placeholder="Ex: Bagagem extra, necessidade de acessibilidade, crian√ßa pequena, etc." maxlength="500"></textarea>
                </div>
            </section>

            <!-- Container de Pre√ßo -->
            <div class="price-container" id="priceContainer">
                <div class="price-label">Pre√ßo estimado para</div>
                <div class="price-value" id="priceValue">0 Escudos</div>
                <div class="price-detail" id="priceDetail">Selecione origem e destino para calcular</div>
            </div>

            <!-- Bot√£o de Envio -->
            <button type="submit" class="submit-btn" id="btnSubmit">
                <span id="btnText">Confirmar Reserva</span>
            </button>
        </form>

        <!-- Confirma√ß√£o da Reserva -->
        <div class="confirmation" id="confirmation">
            <div class="confirmation-header">
                <i class="fas fa-check-circle confirmation-icon"></i>
                <h3>Reserva Confirmada!</h3>
            </div>
            <div id="confirmationContent">
                <!-- O conte√∫do ser√° preenchido por JavaScript -->
            </div>
        </div>

        <!-- Informa√ß√µes do WhatsApp -->
        <div class="whatsapp-info" id="whatsappInfo">
            <p><i class="fab fa-whatsapp"></i> <strong>Reserva enviada para o WhatsApp!</strong></p>
            <p>A mensagem foi enviada para o n√∫mero: <strong>917 71 61</strong></p>
            <p><a href="#" id="whatsappLink" target="_blank" style="color: white; text-decoration: underline;">Clique aqui para abrir o WhatsApp</a></p>
        </div>
    </div>

    <!-- Rodap√© -->
    <footer>
        <p>¬© 2024 Tarrafal Transportes - Todos os direitos reservados</p>
        <p class="developer-credit">Site feito por <a href="https://wa.me/2389177161?text=Ol√°%20Leonardo,%20vim%20pelo%20site%20do%20Tarrafal%20Transportes" target="_blank">Leonardo Nardy</a></p>
    </footer>

    <script>
        // Configura√ß√µes iniciais
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar data m√≠nima como hoje
            const hoje = new Date().toISOString().split('T')[0];
            document.getElementById('data').min = hoje;
            
            // Inicializar destinos
            atualizarDestinos();
            
            // Configurar eventos
            document.getElementById('origem').addEventListener('change', function() {
                atualizarDestinos();
                calcularPreco();
            });
            
            document.getElementById('destino').addEventListener('change', calcularPreco);
            document.getElementById('passageiros').addEventListener('change', calcularPreco);
            
            // Formatar telefone enquanto digita
            document.getElementById('telefone').addEventListener('input', formatarTelefone);
            
            // Configurar valida√ß√£o em tempo real
            setupRealTimeValidation();
            
            // Calcular pre√ßo inicial
            setTimeout(calcularPreco, 300);
        });

        // Pre√ßos das rotas
        const precos = {
            'Tarrafal-Assomada': 300,
            'Assomada-Tarrafal': 300,
            'Tarrafal-Praia': 600,
            'Praia-Tarrafal': 600,
            'Assomada-Praia': 500,
            'Praia-Assomada': 500
        };

        // Atualizar destinos dispon√≠veis
        function atualizarDestinos() {
            const origem = document.getElementById('origem').value;
            const destinoSelect = document.getElementById('destino');
            const cidades = ['Tarrafal', 'Assomada', 'Praia'];
            
            // Limpar op√ß√µes atuais
            destinoSelect.innerHTML = '<option value="">Selecione o destino</option>';
            
            // Adicionar todas as cidades exceto a origem selecionada
            cidades.forEach(cidade => {
                if (cidade !== origem) {
                    const option = document.createElement('option');
                    option.value = cidade;
                    option.textContent = cidade;
                    destinoSelect.appendChild(option);
                }
            });
            
            // Validar se destino atual ainda √© v√°lido
            validarCampo('destino');
        }

        // Formatar n√∫mero de telefone
        function formatarTelefone(event) {
            let valor = event.target.value.replace(/\D/g, '');
            
            if (valor.length > 9) valor = valor.substring(0, 9);
            
            if (valor.length > 6) {
                valor = valor.replace(/(\d{3})(\d{2})(\d{2})/, '$1 $2 $3');
            } else if (valor.length > 4) {
                valor = valor.replace(/(\d{3})(\d{2})/, '$1 $2');
            }
            
            event.target.value = valor;
            validarCampo('telefone');
        }

        // Calcular e mostrar pre√ßo
        function calcularPreco() {
            const origem = document.getElementById('origem').value;
            const destino = document.getElementById('destino').value;
            const passageiros = parseInt(document.getElementById('passageiros').value) || 1;
            const priceContainer = document.getElementById('priceContainer');
            const priceValue = document.getElementById('priceValue');
            const priceDetail = document.getElementById('priceDetail');
            
            if (origem && destino && origem !== destino) {
                const rota = `${origem}-${destino}`;
                const precoBase = precos[rota];
                
                if (precoBase) {
                    // Calcular pre√ßo total
                    let precoTotal = precoBase;
                    if (passageiros > 1) {
                        precoTotal = precoBase * passageiros;
                        if (passageiros >= 5) {
                            precoTotal = precoBase * 4; // Desconto para grupos grandes
                        }
                    }
                    
                    // Atualizar exibi√ß√£o do pre√ßo
                    priceValue.textContent = `${precoTotal} Escudos`;
                    
                    if (passageiros > 1) {
                        priceDetail.textContent = `${precoBase} √ó ${passageiros} passageiros`;
                        if (passageiros >= 5) {
                            priceDetail.textContent += ' (desconto para grupo aplicado)';
                        }
                    } else {
                        priceDetail.textContent = `Pre√ßo para 1 passageiro na rota ${origem} ‚Üí ${destino}`;
                    }
                    
                    // Mostrar container com anima√ß√£o
                    priceContainer.classList.add('visible');
                } else {
                    priceValue.textContent = 'Rota n√£o dispon√≠vel';
                    priceDetail.textContent = 'Entre em contato para outras rotas';
                    priceContainer.classList.add('visible');
                }
            } else {
                priceContainer.classList.remove('visible');
            }
        }

        // Configurar valida√ß√£o em tempo real
        function setupRealTimeValidation() {
            const campos = ['nome', 'telefone', 'localizacao', 'origem', 'destino', 'data', 'hora'];
            
            campos.forEach(campoId => {
                const elemento = document.getElementById(campoId);
                if (elemento) {
                    elemento.addEventListener('blur', () => validarCampo(campoId));
                    elemento.addEventListener('input', () => {
                        const formGroup = elemento.closest('.form-group');
                        if (formGroup) formGroup.classList.remove('error');
                    });
                }
            });
        }

        // Validar um campo espec√≠fico
        function validarCampo(campoId) {
            const elemento = document.getElementById(campoId);
            const valor = elemento.value.trim();
            const formGroup = elemento.closest('.form-group');
            let valido = true;
            
            switch(campoId) {
                case 'nome':
                    valido = valor.length >= 3;
                    break;
                case 'telefone':
                    const numeros = valor.replace(/\D/g, '');
                    valido = numeros.length >= 7;
                    break;
                case 'localizacao':
                    valido = valor.length >= 5;
                    break;
                case 'origem':
                case 'destino':
                    valido = valor !== '';
                    break;
                case 'data':
                    const dataSelecionada = new Date(valor);
                    const hoje = new Date();
                    hoje.setHours(0, 0, 0, 0);
                    valido = valor && dataSelecionada >= hoje;
                    break;
                case 'hora':
                    if (valor) {
                        const hora = parseInt(valor.split(':')[0]);
                        valido = hora >= 5 && hora <= 22;
                    } else {
                        valido = false;
                    }
                    break;
            }
            
            if (formGroup) {
                if (!valido && elemento.hasAttribute('required')) {
                    formGroup.classList.add('error');
                } else {
                    formGroup.classList.remove('error');
                }
            }
            
            return valido;
        }

        // Validar formul√°rio completo
        function validarFormulario() {
            const campos = ['nome', 'telefone', 'localizacao', 'origem', 'destino', 'data', 'hora'];
            let valido = true;
            
            campos.forEach(campoId => {
                if (!validarCampo(campoId)) {
                    valido = false;
                }
            });
            
            // Valida√ß√£o adicional: origem n√£o pode ser igual ao destino
            const origem = document.getElementById('origem').value;
            const destino = document.getElementById('destino').value;
            
            if (origem && destino && origem === destino) {
                const destinoGroup = document.getElementById('destino').closest('.form-group');
                destinoGroup.classList.add('error');
                const errorMsg = destinoGroup.querySelector('.error-message');
                if (errorMsg) errorMsg.textContent = 'Origem e destino n√£o podem ser iguais';
                valido = false;
            }
            
            return valido;
        }

        // Criar mensagem para WhatsApp
        function criarMensagemWhatsApp(dados) {
            const dataFormatada = formatarData(dados.data);
            
            return `üöñ *NOVA RESERVA - TARRARFAL TRANSPORTES*

üìã *DADOS DO CLIENTE:*
‚Ä¢ Nome: ${dados.nome}
‚Ä¢ Telefone: ${dados.telefone}
‚Ä¢ Localiza√ß√£o: ${dados.localizacao}

üìç *DETALHES DA VIAGEM:*
‚Ä¢ Rota: ${dados.origem} ‚Üí ${dados.destino}
‚Ä¢ Data: ${dataFormatada}
‚Ä¢ Hora: ${dados.hora}
‚Ä¢ Passageiros: ${dados.passageiros}
${dados.observacoes ? `‚Ä¢ Observa√ß√µes: ${dados.observacoes}\n` : ''}
üí∞ *VALORES:*
‚Ä¢ Pre√ßo base: ${dados.precoBase} Escudos
‚Ä¢ Total: *${dados.precoTotal} Escudos*

üìù *INFORMA√á√ïES DA RESERVA:*
‚Ä¢ N√∫mero: ${dados.numeroReserva}
‚Ä¢ Data da reserva: ${new Date().toLocaleDateString('pt-PT')}
‚Ä¢ Hora da reserva: ${new Date().toLocaleTimeString('pt-PT', {hour: '2-digit', minute:'2-digit'})}

‚ö†Ô∏è *A√á√ÉO REQUERIDA:*
1. Confirmar com o cliente
2. Atribuir motorista
3. Preparar ve√≠culo adequado`;
        }

        // Formatar data
        function formatarData(dataString) {
            const data = new Date(dataString + 'T00:00:00');
            return data.toLocaleDateString('pt-PT', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        // Submiss√£o do formul√°rio
        document.getElementById('formMarcacao').addEventListener('submit', function(event) {
            event.preventDefault();
            
            if (!validarFormulario()) {
                // Rolar at√© o primeiro erro
                const primeiroErro = document.querySelector('.form-group.error');
                if (primeiroErro) {
                    primeiroErro.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                return;
            }
            
            // Coletar dados do formul√°rio
            const dados = {
                nome: document.getElementById('nome').value.trim(),
                telefone: document.getElementById('telefone').value,
                localizacao: document.getElementById('localizacao').value.trim(),
                origem: document.getElementById('origem').value,
                destino: document.getElementById('destino').value,
                data: document.getElementById('data').value,
                hora: document.getElementById('hora').value,
                passageiros: document.getElementById('passageiros').value,
                observacoes: document.getElementById('observacoes').value.trim(),
                rota: `${document.getElementById('origem').value}-${document.getElementById('destino').value}`,
                precoBase: precos[`${document.getElementById('origem').value}-${document.getElementById('destino').value}`] || 0,
                precoTotal: calcularPrecoTotal(),
                numeroReserva: 'RES' + Math.floor(Math.random() * 1000000).toString().padStart(6, '0')
            };
            
            // Calcular pre√ßo total (fun√ß√£o auxiliar)
            function calcularPrecoTotal() {
                const origem = document.getElementById('origem').value;
                const destino = document.getElementById('destino').value;
                const passageiros = parseInt(document.getElementById('passageiros').value) || 1;
                const rota = `${origem}-${destino}`;
                
                let precoBase = precos[rota] || 0;
                let precoTotal = precoBase;
                
                if (passageiros > 1) {
                    precoTotal = precoBase * passageiros;
                    if (passageiros >= 5) {
                        precoTotal = precoBase * 4;
                    }
                }
                
                return precoTotal;
            }
            
            // Mostrar estado de loading
            const botao = document.getElementById('btnSubmit');
            const btnText = document.getElementById('btnText');
            btnText.textContent = 'Processando...';
            botao.classList.add('loading');
            botao.disabled = true;
            
            // Simular processamento (em sistema real seria uma chamada AJAX)
            setTimeout(() => {
                // Enviar para WhatsApp
                const mensagem = criarMensagemWhatsApp(dados);
                const mensagemCodificada = encodeURIComponent(mensagem);
                const whatsappLink = `https://wa.me/2389177161?text=${mensagemCodificada}`;
                
                // Atualizar link do WhatsApp
                document.getElementById('whatsappLink').href = whatsappLink;
                
                // Mostrar confirma√ß√£o
                mostrarConfirmacao(dados);
                
                // Mostrar info do WhatsApp
                document.getElementById('whatsappInfo').style.display = 'block';
                
                // Abrir WhatsApp em nova aba ap√≥s um breve delay
                setTimeout(() => {
                    window.open(whatsappLink, '_blank');
                }, 800);
                
                // Restaurar bot√£o
                setTimeout(() => {
                    btnText.textContent = 'Reserva Enviada!';
                    botao.classList.remove('loading');
                    
                    // Opcional: resetar formul√°rio ap√≥s alguns segundos
                    // setTimeout(() => {
                    //     document.getElementById('formMarcacao').reset();
                    //     btnText.textContent = 'Confirmar Reserva';
                    //     botao.disabled = false;
                    //     document.getElementById('confirmation').style.display = 'none';
                    //     document.getElementById('whatsappInfo').style.display = 'none';
                    //     atualizarDestinos();
                    //     calcularPreco();
                    // }, 5000);
                }, 1500);
            }, 1500);
        });

        // Mostrar confirma√ß√£o
        function mostrarConfirmacao(dados) {
            const confirmation = document.getElementById('confirmation');
            const confirmationContent = document.getElementById('confirmationContent');
            const dataFormatada = formatarData(dados.data);
            
            confirmationContent.innerHTML = `
                <p><strong>N√∫mero da Reserva:</strong> ${dados.numeroReserva}</p>
                <div style="background: white; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <h4 style="margin-top: 0; color: var(--text-primary);">üìã Dados da Reserva</h4>
                    <p><strong>Cliente:</strong> ${dados.nome}</p>
                    <p><strong>Telefone:</strong> ${dados.telefone}</p>
                    <p><strong>Local de Recolha:</strong> ${dados.localizacao}</p>
                    <p><strong>Viagem:</strong> ${dados.origem} ‚Üí ${dados.destino}</p>
                    <p><strong>Data:</strong> ${dataFormatada}</p>
                    <p><strong>Hora:</strong> ${dados.hora}</p>
                    <p><strong>Passageiros:</strong> ${dados.passageiros}</p>
                    ${dados.observacoes ? `<p><strong>Observa√ß√µes:</strong> ${dados.observacoes}</p>` : ''}
                    <p><strong>Total a Pagar:</strong> <span style="font-size: 18px; color: var(--success); font-weight: bold;">${dados.precoTotal} Escudos</span></p>
                </div>
                <p style="font-size: 14px; color: var(--text-secondary);">
                    O motorista entrar√° em contacto brevemente para confirmar os detalhes da viagem.
                </p>
            `;
            
            confirmation.style.display = 'block';
            confirmation.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    </script>
</body>
</html>
